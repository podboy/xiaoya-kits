# xiaoya-kits

> å°é›… alist éƒ¨ç½²å’Œç»´æŠ¤ã€‚

## â¤ï¸ èµåŠ©

`xiaoya-kits` å®Œå…¨å…è´¹è·å–åŠä½¿ç”¨ï¼Œä½†æ˜¯æ‚¨çš„èµèµå¯ä»¥é¼“åŠ±ä½œè€…ç»´æŠ¤ï¼Œä¸‡åˆ†è°¢è°¢ï¼

### ğŸŒŸ GitHub Star

è¯·ç‚¹å‡» [GitHub](https://github.com/podboy/xiaoya-kits) å³ä¸Šè§’çš„ `â­ Star` å¢åŠ äººæ°”ï¼Œä»¥ä¾¿æ›´å¤šçš„äººå‘ç°æ­¤å·¥å…·ã€‚

### ğŸ’½ è½¬å­˜é˜¿é‡Œäº‘ç›˜æ–‡ä»¶

ç‚¹å‡»é“¾æ¥ä¿å­˜ï¼Œæˆ–è€…å¤åˆ¶æœ¬æ®µå†…å®¹ï¼Œæ‰“å¼€ã€Œé˜¿é‡Œäº‘ç›˜ã€APP ã€‚

<https://www.alipan.com/s/dn6J8Gg4FUC>

è¿™æ˜¯ä¸€ä¸ªéå¸¸å°çš„æ–‡ä»¶ï¼ˆä»…å ç”¨æ‚¨å‡ KBç©ºé—´ï¼‰ï¼Œæ‚¨çš„è½¬å­˜å¯ä»¥ä½¿ä½œè€…è·å¾—æ›´å¤šçš„å­˜å‚¨ç©ºé—´ã€‚

### ğŸ’° æ‰“èµ

æ¬¢è¿ç›´æ¥é€šè¿‡æ‰“èµæ¥æ”¯æŒä½œè€…ï¼

![å¾®ä¿¡èµèµç ](.resource/wechatpay_rewardcode.jpg)

## ğŸ—‘ï¸ xiaoya clear-aliyundrive

> ä¸€ä¸ªæ¸…ç†`é˜¿é‡Œäº‘ç›˜`ä¸­ `xiaoya` è½¬å­˜æ–‡ä»¶çš„å·¥å…·ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹© `xiaoya clear-aliyundrive`

ç›¸æ¯”äºå…¶ä»–ï¼ˆä½¿ç”¨ `Shell` å¼€å‘ï¼‰çš„æ¸…ç†è„šæœ¬ï¼Œ`xiaoya clear-aliyundrive` çš„æ¸…ç†æ›´åŠ çµæ´»ã€‚

ç”±äº `xiaoya-kits` åŸºäº `Python` å¼€å‘ï¼Œå¹¶ä¸”ä½¿ç”¨äº† [xarg-python](https://github.com/bondbox/xarg-python) æ¨¡å—ï¼Œå› æ­¤ `xiaoya clear-aliyundrive` å‘½ä»¤è¡Œæ›´ä¸ºå‹å¥½ï¼Œå¯åŒæ—¶è¿›è¡Œå¤šç»´åº¦çš„æ¸…ç†è¿‡æ»¤ï¼Œç»´æŠ¤ä¹Ÿç›¸å¯¹æ¥è¯´æ›´åŠ ç®€å•ã€‚

### è¿‡æ»¤æ¡ä»¶

`xiaoya clear-aliyundrive` ä¼šå¯¹å°é›…è½¬å­˜æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬æ–‡ä»¶å¤¹ï¼‰æŒ‰ç…§ `updated_at` æ—¶é—´è¿›è¡Œæ’åºï¼Œæ‰€æœ‰æœ€æ–°çš„è½¬å­˜æ–‡ä»¶ä¼šè¢«ä¼˜å…ˆä¿ç•™ã€‚

#### å¼ºåˆ¶æ¡ä»¶

1. ä¸ºé¿å…æ¸…ç†æ­£åœ¨è½¬å­˜æˆ–è€…åˆšåˆšè½¬å­˜çš„æ–‡ä»¶ï¼Œä¼šå¼ºåˆ¶ä¿ç•™ `60` ç§’å†…çš„æ–‡ä»¶ï¼ˆå’Œæ–‡ä»¶å¤¹ï¼‰ã€‚
2. ç”±äºå½“å‰æ–‡ä»¶å¤¹æ²¡æœ‰ `size` å±æ€§ï¼Œè¿˜æ— æ³•ç»Ÿè®¡æ–‡ä»¶å¤¹çš„å ç”¨ç©ºé—´ï¼Œå¹¶ä¸”å°é›…ä¸€èˆ¬è½¬å­˜çš„éƒ½æ˜¯æ–‡ä»¶è€Œéæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥æ–‡ä»¶å¤¹ä¼šè¢«å¼ºåˆ¶æ¸…ç†ã€‚
3. è™½ç„¶å¯ä»¥æ ¹æ®æ–‡ä»¶å¤§å°æ¥è¿‡æ»¤æ–‡ä»¶ï¼Œä½†æ˜¯ï¼ˆå¤§äºç©ºé—´çº¦æŸæ¡ä»¶çš„ï¼‰è¶…å¤§æ–‡ä»¶æ€»æ˜¯ä¼šè¢«æ¸…ç†ï¼Œæ‰€ä»¥å¿…é¡»å¼ºåˆ¶ä¿ç•™ä¸€äº›ï¼ˆæ²¡æœ‰è¿‡æ—¶çš„ï¼‰æ–‡ä»¶ã€‚

#### æ¸…ç†è¿‡å¤šçš„æ–‡ä»¶

`--file`ï¼Œåè¿›åˆ¶æ•°ï¼ŒæŒ‡å®šæœ€å¤§ä¿ç•™çš„æ–‡ä»¶æ•°ï¼ˆé»˜è®¤å€¼ä¸ºï¼š100ï¼‰ã€‚

æŒ‰ç…§ `updated_at` æ—¶é—´è¿›è¡Œæ’åºï¼Œè¶…è¿‡æŒ‡å®šæ•°é‡åçš„æ–‡ä»¶ä¼šè¢«å¼ºåˆ¶æ¸…ç†ã€‚

**é»˜è®¤å€¼ `100` åº”è¯¥å¤Ÿä¿æŒä¸€éƒ¨ç”µè§†è¿ç»­å‰§äº†ï¼Œå¦‚æœä½ è½¬å­˜äº†éå¸¸å¤šçš„å°æ–‡ä»¶ï¼Œå¯é€‚å½“å¢å¤§æ­¤å€¼ã€‚**

#### æ¸…ç†è¾ƒå¤§çš„æ–‡ä»¶

`--byte`ï¼Œåè¿›åˆ¶æ•°ï¼Œæœ€å¤§ä¿ç•™çš„ç©ºé—´é‡ï¼ˆé»˜è®¤å€¼ä¸ºï¼š50.0GBï¼‰ï¼Œå•ä½ä¸ºå­—èŠ‚æ•°ã€‚

æŒ‰ç…§ `updated_at` æ—¶é—´è¿›è¡Œæ’åºå¹¶è®¡ç®—ç©ºé—´ï¼Œè¶…è¿‡æŒ‡å®šç©ºé—´åçš„æ–‡ä»¶ä¼šè¢«æ¸…ç†ã€‚

**é»˜è®¤å€¼ `50.0GB` å³ä¸€åŠçš„ `é˜¿é‡Œäº‘ç›˜` æ°¸ä¹…å…è´¹ç©ºé—´ï¼Œå¦‚æœæ‚¨æœ‰æ›´å¤šå¯ç”¨ç©ºé—´æˆ–å¯ç”¨ç©ºé—´ä¸è¶³ï¼Œå¯é€‚å½“è°ƒæ•´æ­¤å€¼ã€‚**

#### æ¸…ç†è¾ƒæ—©çš„æ–‡ä»¶

`--minute`ï¼Œåè¿›åˆ¶æ•°ï¼Œæœ€å¤§ä¿ç•™çš„åˆ†é’Ÿå€¼ï¼ˆé»˜è®¤å€¼ä¸ºï¼š24hï¼‰ï¼Œå•ä½ä¸ºåˆ†é’Ÿã€‚

æŒ‰ç…§ `updated_at` æ—¶é—´ï¼Œå’Œå½“å‰æ—¶é—´çš„å·®å€¼è¶…è¿‡æŒ‡å®šåˆ†é’Ÿæ•°å¼ºåˆ¶æ¸…ç†ã€‚

### â© å¿«é€Ÿæ¸…ç†ï¼ˆä¸€æ¬¡æ€§ï¼‰

ä½¿ç”¨ `Python>=3.8` ç¯å¢ƒï¼Œåœ¨å°é›…æ•°æ®ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
pip3 install --upgrade xiaoya && xiaoya --version
xiaoya clear-aliyundrive --stdout --format
```

### â±ï¸ å®šæ—¶æ¸…ç†

æ‚¨å¯ä»¥å°† `xiaoya clear-aliyundrive` å‘½ä»¤æ·»åŠ åˆ° `crontab` ä¸­ï¼Œå®ç°å®šæ—¶æ¸…ç†ã€‚

### ğŸª æŒç»­æ¸…ç†ï¼ˆå®ˆæŠ¤æ¨¡å¼ï¼‰

åœ¨å°é›…æ•°æ®ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä½¿ç”¨å®ˆæŠ¤æ¨¡å¼æŒç»­æ¸…ç†ï¼ŒæŒ‰ `ctrl+c` é€€å‡ºï¼š

```bash
pip3 install --upgrade xiaoya && xiaoya --version
xiaoya clear-aliyundrive --stdout --format --daemon
```

### docker éƒ¨ç½²

```bash
docker run -v <xiaoya_config_path>:/etc/xiaoya --name xiaoya-clear ghcr.io/podboy/xiaoya-clear:latest
```

ç¯å¢ƒå˜é‡ï¼š

- `ROOT`ï¼šxiaoya é…ç½®æ–‡ä»¶ç›®å½•ï¼Œé»˜è®¤ `/etc/xiaoya`
- `LEVEL`ï¼šæ—¥å¿—çº§åˆ«ï¼Œé»˜è®¤ `info`
- `MAX_INTERVAL`ï¼šä¸¤æ¬¡æ¸…ç†çš„æœ€å¤§é—´éš”æ—¶é—´ï¼Œå•ä½ç§’ï¼Œé»˜è®¤ `300`
- `MAX_RESERVED_FILE`ï¼šæ¯æ¬¡æ¸…ç†æœ€å¤§ä¿ç•™çš„æ–‡ä»¶æ•°ï¼Œé»˜è®¤ `100`
- `MAX_RESERVED_BYTE`ï¼šæ¯æ¬¡æ¸…ç†æœ€å¤§ä¿ç•™çš„ç©ºé—´é‡ï¼Œå•ä½å­—èŠ‚ï¼Œé»˜è®¤ `53687091200`
- `MAX_RESERVED_MINUTE`ï¼šæ¯æ¬¡æ¸…ç†å¤§ä¿ç•™çš„åˆ†é’Ÿå€¼ï¼Œé»˜è®¤ `1440`

**docker-compose**

```yaml
version: '3'
services:
    podboy:
        image: 'ghcr.io/podboy/xiaoya-clear:latest'
        container_name: xiaoya-clear
        volumes:
            - '<xiaoya_config_path>:/etc/xiaoya'
```
